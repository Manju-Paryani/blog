# Python 核心编程

<!-- @import "[TOC]" {cmd="toc" depthFrom=1 depthTo=6 orderedList=false} -->
<!-- code_chunk_output -->

- [Python 核心编程](#python-核心编程)
  - [正则表达式](#正则表达式)
    - [简介/动机](#简介动机)
    - [特殊符号和字符](#特殊符号和字符)

<!-- /code_chunk_output -->

## 正则表达式
### 简介/动机

[正则表达式](https://zh.wikipedia.org/wiki/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F)为高级的文本模式匹配、抽取、与/或文本形式的搜索和替换功能提供了基础。

python 通过标准库的 [re](https://docs.python.org/zh-cn/3/library/re.html) 模块来支持正则表达式。

核心提示：搜索和匹配的比较
本章通篇会使用搜索和匹配两个术语。当严格讨论与字符串模式相关的正则表达式时，我们会使用 “匹配”，指的是 “模式匹配”。
在 python 术语中，主要有两种方法完成模式匹配：
* 搜索(searching) - 即在字符串任意部分中搜索匹配的模式
* 匹配(matching) - 是指判断一个字符串能否从起始处全部或者部分的匹配某个模式

总之，当设计模式时，全部使用术语 "匹配"；我们按照 Python 如何完成模式匹配的方式来区分 "搜索"和“匹配”。

西面所示为几个正则表达式和它们所匹配的字符串：

| 正则表达式模式 	| 匹配的字符串 	|
|:--------------:	|:------------:	|
|       foo      	|      foo     	|
|     Python     	|    Python    	|
|     abc123     	|    abc123    	|


### 特殊符号和字符
本节将介绍最常见的特殊字符和字符，即所谓的元字符，只是它给予正则表达式强大的功能和灵活性。

符号：
|     表示法     	|                                      描述                                      	|      正则表达式示例     	|
|:--------------:	|:------------------------------------------------------------------------------:	|:-----------------------:	|
|     literal    	|                         匹配文本字符串的字面值 literal                         	|           foo           	|
|    re1\|re2    	|                            匹配正则表达式 re1 或 re2                           	|         foo\|bar        	|
|        .       	|                           匹配任何字符（除了 \n之外）                          	|           b.b           	|
|        ^       	|                               匹配字符串起始部分                               	|          ^Dear          	|
|        $       	|                               匹配字符串终止部分                               	|        /bin/*sh$        	|
|        *       	|                      匹配 0 次或者多次前面出现的正则表达式                     	|       [A-Za-z0-9]*      	|
|        +       	|                      匹配 1 次或者多次前面出现的正则表达式                     	|       [a-z]+\.com       	|
|        ?       	|                     匹配 0 次或者 1 次前面出现的正则表达式                     	|           goo?          	|
|       {N}      	|                          匹配 N 次前面出现的正则表达式                         	|         [0-9]{3}        	|
|      {M,N}     	|                        匹配 M ~ N 次前面出现的正则表达式                       	|        [0-9]{5,9}       	|
|      [...]     	|                          匹配来自字符集的任意单一字符                          	|         [aeiou]         	|
|    [.x-y..]    	|                         匹配 x ~y 范围中的任意单一字符                         	|      [0-9],[A-Za-z]     	|
|     [^...]     	| 不匹配此字符集中出现的任何一个字符，包括某一范围的字符（如果在此字符集中出现） 	|  [^aeiou],[^A-Za-z0-9]  	|
| (*\|+\|?\|{})? 	|          用于匹配上面频繁出现/重复出现符号的非贪婪版本（*、+、?、{}）          	|         .*?[z-z]        	|
|      (...)     	|                      匹配封闭的正则表达式，然后另存为子组                      	| ([0-9]{3})?,f(oo\|u)bar 	|

特殊字符：
| 表示法 	|                                     描述                                    	| 正则表达式示例 	|
|:------:	|:---------------------------------------------------------------------------:	|:--------------:	|
|   \d   	| 匹配任何十进制数字，与 [0-9]一致（\D）与 \d相反，不匹配任何非数值型的数字） 	|   data\d+.txt  	|
|   \w   	|           匹配任何字母数字字符，与 [a-zA-Z0-9] 相同（\W与之相反）           	|  [a-zA-Z_]\w+  	|
|   \s   	|            匹配任何空格字符，与 [\n\t\r\v\f]相同，（\S与之相反）            	|     of\sthe    	|
|   \b   	|                          匹配任何单词边界(\B 相反)                          	|     \bThe\b    	|
|   \N   	|                    匹配已保存的子组N（参见上面的 (...)）                    	|    price:\16   	|
|   \c   	|      逐字匹配任何特殊字符 c （即，仅按照字面意义匹配，不匹配特殊含义）      	|    \\.,\\\\,\\*    	|
| \A(\Z) 	|               匹配字符串的起始（结束）（另见上面介绍的 ^和$）               	|     \ADear     	|

扩展表示法：
|      表示法      	|                                                  描述                                                 	|  正则表达式示例 	|
|:----------------:	|:-----------------------------------------------------------------------------------------------------:	|:---------------:	|
|     (?iLmsux)    	|                   在正则表达式中嵌入一个或者多个特殊“标记”参数（或者通过函数/方法）                   	|   (?x),(? im)   	|
|      (?:...)     	|                                       表示一个匹配不用保存的分组                                      	|    (?:\w+\\.)*   	|
|   (?P<name>...)  	|                           像一个仅由name 标识而不是数字ID标识的正则分组匹配                           	|    (?P\<data\>)   	|
|     (?P=name)    	|                              在同一字符串中匹配由(?P<name)分组的之前文本                              	|    (?P=data)    	|
|      (?#...)     	|                                       标识注释，所有内容都被忽略                                      	|   (?#comment)   	|
|      (?=...)     	|                匹配条件时如果...出现在之后的位置，而不使用输入字符串：称作正向前视断言                	|     (?=.com)    	|
|     (?=!...)     	|               匹配条件时如果...不出现在之后的位置，而不使用输入字符串：称作负向前视断言               	|     (?!.net)    	|
|     (?<=...)     	|                匹配条件时如果...出现在之前的位置，而不使用输入字符串：称作正向后视断言                	|    (?<=800-)    	|
|     (?<!...)     	|               匹配条件时如果...不出现在之前的位置，而不使用输入字符串：称作负向后视断言               	| (?<!192\\.168\\.) 	|
| (?(id/name)Y\|N) 	| 如果分组所提供的 id 或者 name 存在，就返回正则表达式的条件匹配 Y ，如果不存在，就返回 N；\|N 是可选项 	|    (?(1)y\|x)   	|

[上一级](README.md)
[下一篇](noRootUserInstallPackage.md)
